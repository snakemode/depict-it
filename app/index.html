<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Depict-it</title>
    
    <script src="//cdn.ably.io/lib/ably-1.js" defer></script>    
    <script src="//cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
 
    <script src="/index.js" type="module"></script>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div id="app">
      <div class="debug">
        {{ state?.status == undefined ? "disconnected" : state?.status }}
      </div>

      <section class="header">
        <h1>Depict-it</h1>        
      </section>

      <div v-if="!joinedOrHosting">
        <create-game-form v-on:create="host" v-on:join="join"></create-game-form>
      </div>
      <div v-else id="activeGame" class="game-info">
        
        <div class="game-lobby" v-if="gameCanBeStarted"> 
          <invite-link :game-id="gameId"></invite-link>
          <connected-players-summary :state="transmittedServerState"></connected-players-summary>
          <ready-or-waiting-prompt 
            :is-host="iAmHost" 
            :game-ready="gameCanBeStarted" 
            :state="transmittedServerState"
            v-on:startgame="startGame"></ready-or-waiting-prompt>            
        </div>

        <timer-bar 
          v-if="state?.lastInstruction?.timeout != null" 
          :countdown="state?.lastInstruction?.timeout" 
        ></timer-bar>

        <playfield 
          v-if="state?.lastInstruction"
          :state="state"
          :client="p2pClient"
        ></playfield>


      </div>
    </div>
  </body>
</html>